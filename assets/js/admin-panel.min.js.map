{"version":3,"sources":["admin-panel.js"],"names":["$","_","d","adminPanelSettings","onInit","getSelectorName","bindEvents","payments","_elements","$baseWrap","$linkWrap","$formSave","$saveBtn","$hash","window","location","hash","$hashRgx","split","$wpSubMenu","find","$getUrl","$tabSelect","on","e","preventDefault","post","url","ajaxUrl","data","nonce","action","serialize","beforeSend","text","success","console","log","attr","savedChangesText","saveChangesText","length","$hashRgxLink","$matches","match","addClass","siblings","removeClass","parent","currentTarget","wp_get_hash","$ipsp","purchasedLink","button","get","setMerchantId","setAmount","setHost","addField","getUrl","jQuery","portunaAjax","document"],"mappings":"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","sourcesContent":[";\n(function ($, _, d) {\n    'use strict';\n\n    const adminPanelSettings = {\n        onInit: function() {\n            this.getSelectorName();\n            this.bindEvents();\n            this.payments();\n        },\n\n        getSelectorName: function() {\n            this._elements = {\n                $baseWrap:      $( '.portuna-addon-admin' ),\n                $linkWrap:      $( '#toplevel_page_portuna-addon' ),\n                $formSave:      $( '#portuna-addon-form' ),\n                $saveBtn:       $( '.portuna-addon-form-save-btn' ),\n                $hash:          window.location.hash,\n            }\n        },\n\n        bindEvents: function() {\n            const {\n                $baseWrap,\n                $linkWrap,\n                $formSave,\n                $saveBtn,\n                $hash\n            } = this._elements;\n\n            let $hashRgx   = $hash.split('/'),\n                $wpSubMenu = $linkWrap.find( '.wp-submenu' ),\n                $getUrl    = 'admin.php?page=portuna-addon' + $hashRgx[0],\n                $tabSelect;\n\n            $formSave.on( 'submit', e => {\n                e.preventDefault();\n\n                $.post( {\n                    url: _.ajaxUrl,\n                    data: {\n                        nonce:  _.nonce,\n                        action: _.action,\n                        data:   $formSave.serialize()\n                    },\n                    beforeSend: () => {\n                        $saveBtn.text( '...' );\n                    },\n                    success: ($) => {\n                        console.log($);\n\n                        if ( $.success ) {\n                            $saveBtn.attr( 'disabled', !0 );\n                            $saveBtn.text( _.savedChangesText );\n                        }\n                    }\n                } );\n            } ),\n                $formSave.on( 'keyup change paste', 'input, select, textarea, :checkbox, :radio', function() {\n                    $saveBtn.attr( 'disabled', !1 ).text( _.saveChangesText );\n                } );\n\n            if ( $hashRgx[ $hashRgx.length - 1 ] == 0 ) {\n                let $hashRgxLink = $hashRgx[ $hashRgx.length - 2 ],\n                    $matches     = $hashRgxLink.match(/[a-zA-Z]+/g);\n\n                $tabSelect = $matches[0];\n            } else {\n                let $hashRgxLink = $hashRgx[ $hashRgx.length - 1],\n                    $matches     = $hashRgxLink.match(/[a-zA-Z]+/g);\n\n                $tabSelect = $matches[0];\n            }\n\n            $baseWrap\n                .find( '.portuna-addon-admin--content-menu--' + $tabSelect )\n                .addClass( 'nav-is-active' )\n                .siblings()\n                .removeClass( 'nav-is-active' );\n\n            $hash &&\n                $('#toplevel_page_portuna-addon .wp-submenu li a[href=\"' + $getUrl + '\"]')\n                    .parent('li')\n                    .addClass('current')\n                    .siblings()\n                    .removeClass('current');\n\n                $wpSubMenu\n                    .on( 'click', 'a', function(e) {\n                        if ( ! e.currentTarget.hash ) return !0;\n\n                        e.preventDefault();\n\n                        window.location.hash = e.currentTarget.hash;\n\n                        let wp_get_hash = window.location.hash.match(/[a-zA-Z]+/g);\n\n                        $baseWrap\n                            .find('.portuna-addon-admin--content-menu--' + wp_get_hash[0])\n                            .addClass('nav-is-active')\n                            .siblings()\n                            .removeClass('nav-is-active');\n\n                        $(this)\n                            .parent()\n                            .addClass('current')\n                            .siblings()\n                            .removeClass('current');\n                    } );\n        },\n        payments: function() {\n            if ( ! window.$ipsp ) return;\n\n            const {\n                $baseWrap,\n            } = this._elements;\n            // $( document ).on( 'ready', () => {\n            const purchasedLink = $baseWrap.find( '.portuna-addon-admin--panel-redirect' );\n\n            var button = $ipsp.get('button');\n\n            button.setMerchantId( 1474027 );\n            button.setAmount( '10', 'USD', true );\n            button.setHost( 'pay.fondy.eu' );\n            console.log( window );\n            $ipsp('button').addField({\n                'label':'Account Id',\n                'name' :'account_id',\n                'value':'127318273',   //не обязательно, по умолчанию пустое\n                'readonly':true, //не обязательно, по умолчанию false\n                'required':true, //не обязательно, по умолчанию false\n            });\n\n            purchasedLink.attr( 'href', button.getUrl() );\n\n\n        }\n    };\n\n    $( () => {\n        adminPanelSettings.onInit();\n    } );\n\n} )(jQuery, window.portunaAjax, document);"],"file":"admin-panel.min.js"}