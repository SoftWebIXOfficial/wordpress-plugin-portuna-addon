"use strict";

;

(function ($, _, d) {
  'use strict';

  var adminPanelSettings = {
    onInit: function onInit() {
      this.getSelectorName();
      this.bindEvents();
    },
    getSelectorName: function getSelectorName() {
      this._elements = {
        $formSave: $('#portuna-addon-form'),
        $saveBtn: $('.portuna-addon-form-save-btn')
      };
    },
    bindEvents: function bindEvents() {
      var _this$_elements = this._elements,
          $formSave = _this$_elements.$formSave,
          $saveBtn = _this$_elements.$saveBtn;
      $formSave.on('submit', function (e) {
        e.preventDefault();
        $.post({
          url: _.ajaxUrl,
          data: {
            nonce: _.nonce,
            action: _.action,
            data: $formSave.serialize()
          },
          beforeSend: function beforeSend() {
            $saveBtn.text('.....');
          },
          success: function success($) {
            console.log($);

            if ($.success) {
              $saveBtn.attr('disabled', !0);
              $saveBtn.text(_.savedChangesText);
            }
          }
        });
      }), $formSave.on('keyup change paste', 'input, select, textarea, :checkbox, :radio', function () {
        $saveBtn.attr('disabled', !1).text(_.saveChangesText);
      });
    }
  };
  $(function () {
    adminPanelSettings.onInit();
  });
})(jQuery, window.portunaAjax, document);
