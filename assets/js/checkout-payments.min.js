"use strict";

(function () {
  'use strict';

  (function ($, paymentInfo, d) {
    var checkoutPayment = {
      onInit: function onInit() {
        this.getSelectorName();
        this.bindEvents();
      },
      getSelectorName: function getSelectorName() {
        this._elements = {
          $baseWrap: $('.fondy-payment-system')
        };
      },
      bindEvents: function bindEvents() {
        var $baseWrap = this._elements.$baseWrap,
            _paymentInfo$callback = paymentInfo.callback,
            checkoutStatus = _paymentInfo$callback.order_status,
            userEmail = _paymentInfo$callback.sender_email;
        console.log(paymentInfo.callback);

        if (checkoutStatus === 'approved') {
          if ($baseWrap[0]) {
            var elEmail = $baseWrap.find('.user-email');

            if (elEmail[0]) {
              elEmail.html(': ' + userEmail);
            }
          }

          if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
          }
        }
      }
    };
    $(function () {
      checkoutPayment.onInit();
    });
  })(jQuery, window.portunaCheckoutPayments);
})();
